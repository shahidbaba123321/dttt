<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkWise Pro - Dashboard</title>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Material-UI -->
    <script src="https://unpkg.com/@mui/material@5.14.3/umd/material-ui.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    
    <!-- Roboto Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
        }

        #root {
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Destructure Material-UI components
        const {
            AppBar,
            Toolbar,
            Typography,
            Button,
            IconButton,
            Avatar,
            Menu,
            MenuItem,
            CircularProgress,
            Drawer,
            List,
            ListItem,
            ListItemIcon,
            ListItemText,
            Divider,
            Box,
            CssBaseline,
            ThemeProvider,
            createTheme
        } = MaterialUI;

        // Header Component
        const Header = () => {
            const [anchorEl, setAnchorEl] = React.useState(null);
            const userEmail = localStorage.getItem('userEmail');
            const userName = localStorage.getItem('userName');

            const handleMenu = (event) => {
                setAnchorEl(event.currentTarget);
            };

            const handleClose = () => {
                setAnchorEl(null);
            };

            const handleLogout = () => {
                localStorage.clear();
                window.location.href = '/login.html';
            };

            return (
                <AppBar position="fixed" sx={{ zIndex: (theme) => theme.zIndex.drawer + 1 }}>
                    <Toolbar>
                        <Typography variant="h6" component="div" sx={{ flexGrow: 1 }}>
                            WorkWise Pro
                        </Typography>
                        <IconButton
                            onClick={handleMenu}
                            color="inherit"
                        >
                            <Avatar sx={{ bgcolor: 'secondary.main' }}>
                                {userName ? userName[0] : userEmail ? userEmail[0] : 'U'}
                            </Avatar>
                        </IconButton>
                        <Menu
                            anchorEl={anchorEl}
                            open={Boolean(anchorEl)}
                            onClose={handleClose}
                        >
                            <MenuItem onClick={handleClose}>Profile</MenuItem>
                            <MenuItem onClick={handleLogout}>Logout</MenuItem>
                        </Menu>
                    </Toolbar>
                </AppBar>
            );
        };

        // Sidebar Component
        const Sidebar = () => {
            const menuItems = [
                { text: 'Dashboard', icon: 'dashboard' },
                { text: 'Users', icon: 'people' },
                { text: 'Companies', icon: 'business' },
                { text: 'Settings', icon: 'settings' }
            ];

            return (
                <Drawer
                    variant="permanent"
                    sx={{
                        width: 240,
                        flexShrink: 0,
                        '& .MuiDrawer-paper': {
                            width: 240,
                            boxSizing: 'border-box',
                            marginTop: '64px'
                        },
                    }}
                >
                    <List>
                        {menuItems.map((item) => (
                            <ListItem button key={item.text}>
                                <ListItemIcon>
                                    <span className="material-icons">{item.icon}</span>
                                </ListItemIcon>
                                <ListItemText primary={item.text} />
                            </ListItem>
                        ))}
                    </List>
                </Drawer>
            );
        };

        // Dashboard Component
        const Dashboard = () => {
            return (
                <Box sx={{ p: 3 }}>
                    <Typography variant="h4" gutterBottom>
                        Dashboard
                    </Typography>
                    {/* Add dashboard content here */}
                </Box>
            );
        };

        // Main App Component
        const App = () => {
            const [loading, setLoading] = React.useState(true);

            React.useEffect(() => {
                // Simulate loading
                setTimeout(() => setLoading(false), 1000);
            }, []);

            const theme = createTheme({
                palette: {
                    primary: {
                        main: '#4F46E5',
                    },
                    secondary: {
                        main: '#4338CA',
                    },
                },
            });

            if (loading) {
                return (
                    <Box sx={{ 
                        display: 'flex', 
                        justifyContent: 'center', 
                        alignItems: 'center', 
                        height: '100vh' 
                    }}>
                        <CircularProgress />
                    </Box>
                );
            }

            return (
                <ThemeProvider theme={theme}>
                    <Box sx={{ display: 'flex' }}>
                        <CssBaseline />
                        <Header />
                        <Sidebar />
                        <Box
                            component="main"
                            sx={{
                                flexGrow: 1,
                                p: 3,
                                marginLeft: '240px',
                                marginTop: '64px'
                            }}
                        >
                            <Dashboard />
                        </Box>
                    </Box>
                </ThemeProvider>
            );
        };

        // Render the App
        ReactDOM.render(
            <App />,
            document.getElementById('root')
        );
    </script>
</body>
</html>

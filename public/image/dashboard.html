<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Admin Dashboard</title>
    <link rel="stylesheet" href="superadmin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>Super Admin Dashboard</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#user-management">User Management</a></li>
                    <li><a href="#company-management">Company Management</a></li>
                    <li><a href="#system-config">System Config</a></li>
                    <li><a href="#security">Security</a></li>
                    <li><a href="#support">Support</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Overview Section -->
        <!-- Overview Section -->
<section id="overview" class="dashboard-section">
    <h2>High-Level Overview & Analytics</h2>
    <div class="dashboard-cards">
        <!-- Payroll Metrics Card -->
        <div class="card analytics-card">
            <div class="card-header">
                <i class="fas fa-coins"></i>
                <h3>Payroll Metrics</h3>
            </div>
            <div class="card-content">
                <div class="metric-item">
                    <span class="country-flag in">ðŸ‡®ðŸ‡³</span>
                    <div class="metric-details">
                        <span class="metric-label">India</span>
                        <span class="metric-value">â‚¹12.5M</span>
                        <p>Loading...</p>
                    </div>
                </div>
                <div class="metric-item">
                    <span class="country-flag us">ðŸ‡ºðŸ‡¸</span>
                    <div class="metric-details">
                        <span class="metric-label">USA</span>
                        <span class="metric-value">$2.8M</span>
                        <p>Loading...</p>
                    </div>
                </div>
                <div class="metric-item">
                    <span class="country-flag ae">ðŸ‡¦ðŸ‡ª</span>
                    <div class="metric-details">
                        <span class="metric-label">UAE</span>
                        <span class="metric-value">Ø¯.Ø¥1.2M</span>
                        <p>Loading...</p>
                    </div>
                </div>
                <div class="metric-item">
                    <span class="country-flag qa">ðŸ‡¶ðŸ‡¦</span>
                    <div class="metric-details">
                        <span class="metric-label">Qatar</span>
                        <span class="metric-value">Ø±.Ù‚0.9M</span>
                        <p>Loading...</p>
                    </div>
                </div>
                <div class="update-status">
                    <i class="fas fa-sync"></i>
                    Last updated: Real-time
                </div>
            </div>
        </div>

        <!-- Performance Analytics Card -->
        <div class="card analytics-card">
            <div class="card-header">
                <i class="fas fa-chart-line"></i>
                <h3>Performance Analytics</h3>
            </div>
            <div class="card-content">
                <div class="kpi-item">
                    <div class="kpi-progress">
                        <div class="progress-bar" style="width: 85%"></div>
                    </div>
                    <div class="kpi-details">
                        <span>System Health</span>
                        <span>85%</span>
                    </div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-progress">
                        <div class="progress-bar warning" style="width: 65%"></div>
                    </div>
                    <div class="kpi-details">
                        <span>Data Accuracy</span>
                        <span>65%</span>
                    </div>
                </div>
                <div class="alerts">
                    <div class="alert-item critical">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>3 Critical Anomalies</span>
                    </div>
                    <div class="alert-item warning">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>5 Warnings</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

        <!-- User Management Section -->
        <section id="user-management" class="dashboard-section">
            <h2>User & Role Management</h2>
            <p>Manage user accounts and permissions</p>
            <!-- Add user management tools here -->
        </section>

        <!-- Company Management Section -->
        <section id="company-management" class="dashboard-section">
            <h2>Company Onboarding & Management</h2>
            <p>Create and manage company profiles</p>
            <!-- Add company management tools here -->
        </section>

        <!-- System Configuration Section -->
        <section id="system-config" class="dashboard-section">
            <h2>System Configuration & Integration Control</h2>
            <p>Manage global settings and integrations</p>
            <!-- Add system configuration tools here -->
        </section>

        <!-- Security Section -->
        <section id="security" class="dashboard-section">
            <h2>Security & Audit Oversight</h2>
            <p>Track user actions and system changes</p>
            <!-- Add security tools here -->
        </section>

        <!-- Support Section -->
        <section id="support" class="dashboard-section">
            <h2>Maintenance & Support Tools</h2>
            <p>Manage helpdesk queries and system notifications</p>
            <!-- Add support tools here -->
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2023 Workwise Pro. All rights reserved.</p>
        </div>
    </footer>
    <script>
        async function fetchMetrics() {
  try {
    const payrollResponse = await fetch('/api/payroll-metrics');
    const payrollData = await payrollResponse.json();
    document.getElementById('payroll-metrics').innerHTML = `
      <h3>Payroll Metrics</h3>
      <ul>
        ${payrollData.map(item => `<li>${item._id}: $${item.totalAmount.toFixed(2)}, Avg Tax: ${item.avgTaxRate.toFixed(2)}%</li>`).join('')}
      </ul>
    `;

    const performanceResponse = await fetch('/api/performance-analytics');
    const performanceData = await performanceResponse.json();
    document.getElementById('performance-analytics').innerHTML = `
      <h3>Performance Analytics</h3>
      <ul>
        ${performanceData.map(item => `<li>${item._id}: Avg Score: ${item.avgScore.toFixed(2)}</li>`).join('')}
      </ul>
    `;
  } catch (error) {
    console.error('Error fetching metrics:', error);
  }
}

fetchMetrics();
    </script>
</body>
</html>
